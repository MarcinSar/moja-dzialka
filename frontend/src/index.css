@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   MOJA-DZIA≈ÅKA - Nordic Cartographic Theme
   ============================================ */

@layer base {
  :root {
    --color-surface: 26 31 46;
    --color-amber: 251 191 36;
    --color-teal: 45 212 191;
  }

  html {
    @apply antialiased;
    font-feature-settings: "cv02", "cv03", "cv04", "cv11";
  }

  body {
    @apply bg-slate-950 text-slate-200 font-display;
    background-image:
      radial-gradient(ellipse at 20% 0%, rgba(251, 191, 36, 0.03) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 100%, rgba(45, 212, 191, 0.03) 0%, transparent 50%);
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    @apply w-2;
  }

  ::-webkit-scrollbar-track {
    @apply bg-slate-900;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-slate-700 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-slate-600;
  }
}

@layer components {
  /* Panel base styles */
  .panel {
    @apply bg-surface/80 backdrop-blur-sm border border-border rounded-lg;
    box-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.2),
      0 2px 4px -2px rgba(0, 0, 0, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.02);
  }

  .panel-elevated {
    @apply bg-surface-elevated border border-border-subtle;
  }

  /* Coordinate display style */
  .coord-display {
    @apply font-mono text-2xs text-slate-500 tracking-wider uppercase;
  }

  /* Status indicator */
  .status-dot {
    @apply w-2 h-2 rounded-full;
  }

  .status-dot--active {
    @apply bg-teal-400 shadow-glow-teal animate-pulse-subtle;
  }

  .status-dot--warning {
    @apply bg-amber-400 shadow-glow-amber;
  }

  .status-dot--inactive {
    @apply bg-slate-600;
  }

  /* Score bar */
  .score-bar {
    @apply h-1.5 bg-slate-700 rounded-full overflow-hidden;
  }

  .score-bar__fill {
    @apply h-full rounded-full transition-all duration-500;
  }

  .score-bar__fill--quietness {
    @apply bg-gradient-to-r from-teal-500 to-teal-400;
  }

  .score-bar__fill--nature {
    @apply bg-gradient-to-r from-emerald-500 to-emerald-400;
  }

  .score-bar__fill--accessibility {
    @apply bg-gradient-to-r from-amber-500 to-amber-400;
  }

  /* Activity item */
  .activity-item {
    @apply flex items-start gap-2 py-1.5 px-2 text-sm font-mono;
  }

  .activity-item--thinking {
    @apply text-slate-400;
  }

  .activity-item--action {
    @apply text-amber-400/90;
  }

  .activity-item--success {
    @apply text-teal-400;
  }

  .activity-item--error {
    @apply text-red-400;
  }

  /* Chat message */
  .chat-message {
    @apply p-3 rounded-lg max-w-[85%];
  }

  .chat-message--user {
    @apply bg-amber-500/10 border border-amber-500/20 ml-auto;
  }

  .chat-message--assistant {
    @apply bg-slate-800/50 border border-slate-700/50;
  }

  /* Input field */
  .input-field {
    @apply w-full bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-3
           text-slate-200 placeholder-slate-500
           focus:outline-none focus:border-amber-500/50 focus:ring-1 focus:ring-amber-500/20
           transition-all duration-200;
  }

  /* Button styles */
  .btn {
    @apply px-4 py-2 rounded-lg font-medium transition-all duration-200
           focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900;
  }

  .btn-primary {
    @apply bg-amber-500 text-slate-900 hover:bg-amber-400
           focus:ring-amber-500/50;
  }

  .btn-secondary {
    @apply bg-slate-700 text-slate-200 hover:bg-slate-600
           focus:ring-slate-500/50;
  }

  .btn-ghost {
    @apply text-slate-400 hover:text-slate-200 hover:bg-slate-800/50;
  }

  /* Parcel card */
  .parcel-card {
    @apply panel p-4 cursor-pointer
           hover:border-amber-500/30 hover:shadow-glow-amber
           transition-all duration-300;
  }

  .parcel-card--selected {
    @apply border-amber-500/50 shadow-glow-amber;
  }

  /* Map marker custom styles */
  .map-marker {
    @apply w-8 h-8 rounded-full bg-amber-500 border-2 border-white
           flex items-center justify-center text-xs font-bold text-slate-900
           shadow-lg;
  }

  .map-marker--selected {
    @apply bg-teal-400 scale-125;
  }

  /* Topographic decoration */
  .topo-lines {
    @apply absolute inset-0 pointer-events-none opacity-30;
    background-image: url("data:image/svg+xml,%3Csvg width='200' height='200' viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M20 100 Q 50 60 100 100 T 180 100' fill='none' stroke='%232e3446' stroke-width='1'/%3E%3Cpath d='M20 130 Q 50 90 100 130 T 180 130' fill='none' stroke='%232e3446' stroke-width='1'/%3E%3Cpath d='M20 70 Q 50 30 100 70 T 180 70' fill='none' stroke='%232e3446' stroke-width='1'/%3E%3C/svg%3E");
  }
}

@layer utilities {
  /* Safe area insets for notch / home indicator */
  .pb-safe { padding-bottom: env(safe-area-inset-bottom, 0px); }
  .pt-safe { padding-top: env(safe-area-inset-top, 0px); }
  .pl-safe { padding-left: env(safe-area-inset-left, 0px); }
  .pr-safe { padding-right: env(safe-area-inset-right, 0px); }
  .mb-safe { margin-bottom: env(safe-area-inset-bottom, 0px); }

  /* Glass effect */
  .glass {
    @apply bg-white/5 backdrop-blur-md;
  }

  /* Gradient text */
  .text-gradient {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-amber-400 to-amber-300;
  }

  /* Stagger animations */
  .stagger-1 { animation-delay: 0.1s; }
  .stagger-2 { animation-delay: 0.2s; }
  .stagger-3 { animation-delay: 0.3s; }
  .stagger-4 { animation-delay: 0.4s; }
  .stagger-5 { animation-delay: 0.5s; }
}

/* ============================================
   Leaflet Customizations
   ============================================ */

.leaflet-container {
  @apply bg-slate-900 font-display;
}

/* NOTE: Removed dark filter for satellite/terrain maps to show natural colors */
/* .leaflet-tile-pane {
  filter: saturate(0.8) brightness(0.85);
} */

.leaflet-control-zoom {
  @apply border-none !important;
}

.leaflet-control-zoom a {
  @apply bg-surface-elevated text-slate-300 border-border
         hover:bg-surface-overlay hover:text-white !important;
}

.leaflet-popup-content-wrapper {
  @apply bg-surface-elevated border border-border rounded-lg shadow-xl !important;
}

.leaflet-popup-content {
  @apply text-slate-200 font-display m-0 !important;
}

.leaflet-popup-tip {
  @apply bg-surface-elevated !important;
}

/* Custom marker cluster */
.marker-cluster {
  @apply bg-amber-500/80 border-2 border-amber-300 rounded-full
         flex items-center justify-center font-bold text-slate-900;
}

/* Custom parcel marker icon */
.parcel-marker-icon {
  background: transparent !important;
  border: none !important;
}

/* ============================================
   Loading States
   ============================================ */

.skeleton {
  @apply animate-pulse bg-slate-700/50 rounded;
}

.typing-indicator {
  @apply flex gap-1;
}

.typing-indicator span {
  @apply w-2 h-2 bg-slate-500 rounded-full animate-bounce;
}

.typing-indicator span:nth-child(2) {
  animation-delay: 0.1s;
}

.typing-indicator span:nth-child(3) {
  animation-delay: 0.2s;
}

/* ============================================
   Immersive Search Results Styles
   ============================================ */

/* Custom marker for immersive view */
.custom-marker {
  background: transparent !important;
  border: none !important;
}

/* Ping animation for spotlight markers */
@keyframes ping {
  0% {
    transform: scale(1);
    opacity: 0.8;
  }
  75%, 100% {
    transform: scale(2);
    opacity: 0;
  }
}

.animate-ping {
  animation: ping 1.5s cubic-bezier(0, 0, 0.2, 1) infinite;
}

/* Dark popup override for immersive map */
.dark-popup .leaflet-popup-content-wrapper {
  background: rgba(15, 23, 42, 0.95) !important;
  backdrop-filter: blur(12px);
  border: 1px solid rgba(51, 65, 85, 0.5) !important;
}

.dark-popup .leaflet-popup-tip {
  background: rgba(15, 23, 42, 0.95) !important;
}

.parcel-popup h4 {
  font-weight: 500;
  font-size: 0.875rem;
  color: white;
  margin-bottom: 0.5rem;
}

.parcel-popup .info-row {
  display: flex;
  justify-content: space-between;
}

.parcel-popup .info-label {
  color: rgb(148, 163, 184);
}

.parcel-popup .info-value {
  color: white;
}

/* Glassmorphism utilities */
.glass-card {
  @apply backdrop-blur-xl;
  background: rgba(15, 23, 42, 0.4);
  box-shadow:
    0 8px 32px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.glass-card-hover:hover {
  background: rgba(255, 255, 255, 0.05);
  box-shadow:
    0 8px 40px rgba(245, 158, 11, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

/* Spotlight glow effect */
.spotlight-glow {
  box-shadow:
    0 0 30px rgba(245, 158, 11, 0.3),
    0 0 60px rgba(245, 158, 11, 0.1);
}

/* Radial gradient background */
.bg-gradient-radial {
  background: radial-gradient(circle at center, var(--tw-gradient-from) 0%, var(--tw-gradient-via) 50%, var(--tw-gradient-to) 100%);
}

/* Scrollbar thin variant */
.scrollbar-thin {
  scrollbar-width: thin;
}

.scrollbar-thin::-webkit-scrollbar {
  width: 6px;
}

.scrollbar-thin::-webkit-scrollbar-track {
  background: transparent;
}

.scrollbar-thin::-webkit-scrollbar-thumb {
  @apply bg-slate-700/50 rounded-full;
}

.scrollbar-thin::-webkit-scrollbar-thumb:hover {
  @apply bg-slate-600/50;
}
